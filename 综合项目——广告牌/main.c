#include <reg52.h>


int flag1,time1,shuliang;

void delay(unsigned int ms);
void xianshi();
unsigned int geshu();
void Init();

unsigned char code zimo1[]=
{
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	
0x20,0x24,0x24,0x24,0xFE,0x23,0x22,0x20,0x20,0xFF,0x20,0x22,0x2C,0xA0,0x20,0x00, /*"我",0*/
	
0x80,0x64,0x2C,0x34,0x24,0x24,0xEC,0x32,0x22,0x22,0x32,0x2E,0x23,0xA2,0x60,0x00,/*"爱",0*/

0x40,0x30,0x11,0x96,0x90,0x90,0x91,0x96,0x90,0x90,0x98,0x14,0x13,0x50,0x30,0x00,/*"学",0*/

0x20,0x30,0xAC,0x63,0x30,0x00,0xFC,0x24,0x25,0x26,0x24,0x24,0x24,0x3C,0x00,0x00,/*"编",0*/

0x24,0x24,0xA4,0xFE,0x23,0x22,0x00,0x3E,0x22,0x22,0x22,0x22,0x22,0x3E,0x00,0x00 /*"程",0*/
};

unsigned char code zimo2[]=
{
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	
0x00,0x08,0x48,0x84,0x7F,0x02,0x41,0x40,0x20,0x13,0x0C,0x14,0x22,0x41,0xF8,0x00,  /*"我",0*/
	
0x00,0x41,0x21,0x91,0x89,0x87,0x4D,0x55,0x25,0x25,0x55,0x4D,0x81,0x80,0x80,0x00,/*"爱",0*/

0x04,0x04,0x04,0x04,0x04,0x44,0x84,0x7E,0x06,0x05,0x04,0x04,0x04,0x04,0x04,0x00,/*"学",0*/

0x22,0x67,0x22,0x12,0x52,0x38,0x07,0xFF,0x09,0x7F,0x09,0x3F,0x89,0xFF,0x00,0x00,/*"编",0*/

0x08,0x06,0x01,0xFF,0x01,0x06,0x40,0x49,0x49,0x49,0x7F,0x49,0x49,0x49,0x41,0x00,/*"程",0*/
};

unsigned char code duanma[]=
{
	0x0,0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb,0xc,0xd,0xe,0xf
};

unsigned int geshu()
{
	return (sizeof(zimo1)/sizeof(zimo1[0]));
}

void main()
{
	shuliang = geshu();
	Init();
	while(1)
	{
		xianshi();
	}
}

void xianshi()
{
	int i;
	if(flag1 == (shuliang - 16))
		flag1 = 0;
	for(i = 0;i<16;i++)
	{
		P2 = duanma[i];
		P0 = zimo1[i+flag1];
		delay(2);
	}
		P0 = 0;  
	
	for(i = 0;i<16;i++)
	{
		P2 = duanma[i];
		P1 = zimo2[i+flag1];
		delay(2);
	}
		P1 = 0;
}


void Init()
{
	TMOD = 0x01;
	ET0 = 1;
	TR0 = 1;
	TH0 = (65535 - 50000)/256;
	TL0 = (65535 - 50000)%256;
	EA = 1;
}
void delay(unsigned int ms)
{
	unsigned int i,j;
	for(i = 0;i<ms;i++)
	for(j = 0;j<12;j++);
}

void timer() interrupt 1
{
	TH0 = (65535 - 50000)/256;
	TL0 = (65535 - 50000)%256;
	time1++;
	if(time1 == 2)
	{
		time1 =0;
		flag1++;
	}
	
}